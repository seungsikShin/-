<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì ì‹¬ì‹œê°„ ì œë¹„ë½‘ê¸° ğŸ¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .bounce { animation: bounce 1s infinite; }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .pulse { animation: pulse 2s infinite; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- í—¤ë” -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-3xl font-bold text-gray-800 text-center">ğŸ¯ ì ì‹¬ì‹œê°„ ì œë¹„ë½‘ê¸°</h1>
            <p id="weekInfo" class="text-center text-gray-600 mt-2"></p>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- ë©”ì¸ ì»¨í…ì¸  -->
            <div class="lg:col-span-3">
                <!-- ì €ì¥ëœ ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
                <div id="savedResults" class="hidden bg-white rounded-lg p-6 shadow-sm mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">ğŸ‰ ì´ë²ˆ ì£¼ ì œë¹„ë½‘ê¸° ê²°ê³¼</h2>
                        <div class="flex gap-2">
                            <button onclick="newLottery()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">ğŸ”„ ìƒˆë¡œ ë½‘ê¸°</button>
                            <button onclick="shareResults()" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors">ğŸ“¤ ê³µìœ </button>
                        </div>
                    </div>
                    <div id="resultsContent" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                    <p id="resultDate" class="text-sm text-gray-500 mt-4"></p>
                </div>

                <!-- ì œë¹„ë½‘ê¸° ì„¤ì • ì˜ì—­ -->
                <div id="lotterySetup" class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">ìƒˆë¡œìš´ ì œë¹„ë½‘ê¸°</h2>
                    
                    <!-- ê¸°ë³¸ ì„¤ì • -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                        <!-- ì¸ì›ìˆ˜/í•­ëª©ìˆ˜ ì„¤ì • -->
                        <div class="space-y-6">
                            <div class="flex items-center justify-center gap-4">
                                <span class="text-blue-600 font-medium">ì¸ì›ìˆ˜</span>
                                <button onclick="changeMembers(-1)" class="w-8 h-8 border border-gray-300 rounded flex items-center justify-center hover:bg-gray-100">âˆ’</button>
                                <span id="memberCount" class="text-xl font-semibold min-w-[3rem] text-center">5ëª…</span>
                                <button onclick="changeMembers(1)" class="w-8 h-8 border border-gray-300 rounded flex items-center justify-center hover:bg-gray-100">+</button>
                            </div>
                            
                            <div class="flex items-center justify-center gap-4">
                                <span class="text-blue-600 font-medium">í•­ëª©ìˆ˜</span>
                                <button onclick="changeItems(-1)" class="w-8 h-8 border border-gray-300 rounded flex items-center justify-center hover:bg-gray-100">âˆ’</button>
                                <span id="itemCount" class="text-xl font-semibold min-w-[3rem] text-center">2ê°œ</span>
                                <button onclick="changeItems(1)" class="w-8 h-8 border border-gray-300 rounded flex items-center justify-center hover:bg-gray-100">+</button>
                            </div>
                        </div>
                        
                        <!-- í•­ëª©ëª… ì„¤ì • -->
                        <div class="space-y-4">
                            <label class="block text-sm font-medium text-gray-600">í•­ëª©ëª… ì„¤ì •</label>
                            <div id="itemLabels">
                                <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- ìª½ì§€ í˜„í™© -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">ìª½ì§€ í˜„í™©</h3>
                        <div id="ticketsDisplay" class="grid grid-cols-2 md:grid-cols-5 gap-4">
                            <!-- ìª½ì§€ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                    
                    <!-- ì´ë¦„ ì…ë ¥ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">ì°¸ì—¬ì ì´ë¦„ ì…ë ¥</h3>
                        <div id="nameInputs" class="grid grid-cols-1 md:grid-cols-5 gap-4">
                            <!-- ì´ë¦„ ì…ë ¥ì°½ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </div>
                        <p id="inputStatus" class="text-sm text-gray-600 mt-4"></p>
                    </div>
                    
                    <!-- ì œë¹„ë½‘ê¸° ì‹¤í–‰ -->
                    <div class="text-center">
                        <button id="drawButton" onclick="startDraw()" disabled class="px-8 py-3 rounded-lg font-medium text-white bg-gray-400 cursor-not-allowed transition-all duration-200">
                            ğŸ¯ ì œë¹„ë½‘ê¸° ì‹œì‘!
                        </button>
                    </div>
                </div>
            </div>

            <!-- ì‚¬ì´ë“œë°” -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg p-6 shadow-sm sticky top-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">â„¹ï¸ ì‚¬ìš© ì•ˆë‚´</h3>
                    <div class="space-y-3 text-sm text-gray-600">
                        <p>1. <strong>ì¸ì›ìˆ˜</strong>ì™€ <strong>í•­ëª©ìˆ˜</strong>ë¥¼ ì„¤ì •í•˜ì„¸ìš”</p>
                        <p>2. ê° <strong>í•­ëª©ëª…</strong>ì„ ì…ë ¥í•˜ì„¸ìš”</p>
                        <p>3. ëª¨ë“  <strong>ì°¸ì—¬ì ì´ë¦„</strong>ì„ ì…ë ¥í•˜ì„¸ìš”</p>
                        <p>4. <strong>ì œë¹„ë½‘ê¸° ì‹œì‘</strong> ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</p>
                    </div>
                    
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <h4 class="font-semibold text-gray-800 mb-2">ğŸ“‹ ì´ë²ˆ ì£¼ ê²°ê³¼</h4>
                        <div id="sidebarResults">
                            <p class="text-sm text-gray-500">â³ ì œë¹„ë½‘ê¸° ëŒ€ê¸° ì¤‘</p>
                        </div>
                    </div>
                    
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <h4 class="font-semibold text-gray-800 mb-2">ğŸ› ï¸ ì‹œìŠ¤í…œ ìƒíƒœ</h4>
                        <div class="text-sm text-gray-600">
                            <p id="currentWeek"></p>
                            <p id="nextReset"></p>
                            <p id="saveStatus" class="mt-2"></p>
                        </div>
                        
                        <button onclick="clearData()" class="mt-4 w-full px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm">
                            ğŸ—‘ï¸ ê²°ê³¼ ì‚­ì œ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ê³µìœ  ëª¨ë‹¬ -->
    <div id="shareModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-lg font-semibold mb-4">ğŸ“¤ ê²°ê³¼ ê³µìœ </h3>
            <textarea id="shareText" class="w-full h-48 p-3 border border-gray-300 rounded resize-none" readonly></textarea>
            <div class="flex gap-2 mt-4">
                <button onclick="copyToClipboard()" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">ğŸ“‹ ë³µì‚¬</button>
                <button onclick="closeShareModal()" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let members = 5;
        let items = 2;
        let memberNames = ['', '', '', '', ''];
        let itemLabels = ['ì•íƒ€ì„', 'ë’·íƒ€ì„'];
        let isDrawing = false;
        let currentResults = null;
        
        const colors = ['ğŸŸ¢', 'ğŸ”´', 'ğŸŸ¡', 'ğŸ”µ', 'âš«'];
        const DATA_KEY = 'lunchLotteryData';

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function getMondayOfWeek(date = new Date()) {
            const d = new Date(date);
            const day = d.getDay();
            const diff = d.getDate() - day + (day === 0 ? -6 : 1);
            return new Date(d.setDate(diff));
        }

        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        function isNewWeek() {
            const currentMonday = formatDate(getMondayOfWeek());
            const savedData = getSavedData();
            
            if (!savedData) return true;
            
            return savedData.week !== currentMonday;
        }

        function getSavedData() {
            try {
                const data = localStorage.getItem(DATA_KEY);
                return data ? JSON.parse(data) : null;
            } catch {
                return null;
            }
        }

        function saveData(results) {
            try {
                const data = {
                    results: results,
                    week: formatDate(getMondayOfWeek()),
                    date: new Date().toLocaleString('ko-KR'),
                    timestamp: Date.now()
                };
                localStorage.setItem(DATA_KEY, JSON.stringify(data));
                return true;
            } catch {
                return false;
            }
        }

        function clearData() {
            localStorage.removeItem(DATA_KEY);
            currentResults = null;
            updateUI();
            updateSidebar();
            document.getElementById('savedResults').classList.add('hidden');
            document.getElementById('lotterySetup').classList.remove('hidden');
        }

        // UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        function updateUI() {
            document.getElementById('memberCount').textContent = members + 'ëª…';
            document.getElementById('itemCount').textContent = items + 'ê°œ';
            
            updateItemLabels();
            updateTicketsDisplay();
            updateNameInputs();
            updateInputStatus();
            updateDrawButton();
        }

        function updateItemLabels() {
            const container = document.getElementById('itemLabels');
            container.innerHTML = '';
            
            for (let i = 0; i < items; i++) {
                const div = document.createElement('div');
                div.className = 'flex items-center gap-2';
                div.innerHTML = `
                    <span class="text-sm text-gray-500 min-w-[4rem]">í•­ëª© ${i + 1}</span>
                    <input type="text" value="${itemLabels[i]}" 
                           onchange="updateItemLabel(${i}, this.value)"
                           class="flex-1 px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                           placeholder="í•­ëª© ${i + 1} ì´ë¦„">
                `;
                container.appendChild(div);
            }
        }

        function updateTicketsDisplay() {
            const container = document.getElementById('ticketsDisplay');
            container.innerHTML = '';
            
            for (let i = 0; i < members; i++) {
                const name = memberNames[i];
                const colorEmoji = colors[i % colors.length];
                
                const div = document.createElement('div');
                div.className = 'text-center p-3 border rounded-lg';
                
                if (name.trim()) {
                    div.className += ' bg-green-50 border-green-200';
                    div.innerHTML = `
                        <div class="text-2xl mb-1">${colorEmoji}</div>
                        <div class="font-semibold text-sm">${i + 1}ë²ˆ</div>
                        <div class="text-xs text-green-600">âœ… ${name}</div>
                    `;
                } else {
                    div.className += ' bg-gray-50 border-gray-200';
                    div.innerHTML = `
                        <div class="text-2xl mb-1">âšª</div>
                        <div class="font-semibold text-sm">${i + 1}ë²ˆ</div>
                        <div class="text-xs text-gray-500">â³ ëŒ€ê¸°ì¤‘</div>
                    `;
                }
                
                container.appendChild(div);
            }
        }

        function updateNameInputs() {
            const container = document.getElementById('nameInputs');
            container.innerHTML = '';
            
            for (let i = 0; i < members; i++) {
                const div = document.createElement('div');
                div.innerHTML = `
                    <input type="text" value="${memberNames[i]}" 
                           onchange="updateMemberName(${i}, this.value)"
                           placeholder="${i + 1}ë²ˆ ì´ë¦„" 
                           class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                           ${isDrawing ? 'disabled' : ''}>
                `;
                container.appendChild(div);
            }
        }

        function updateInputStatus() {
            const completedCount = memberNames.filter(name => name.trim() !== '').length;
            const statusElement = document.getElementById('inputStatus');
            
            if (completedCount === members) {
                statusElement.innerHTML = `<span class="text-green-600">âœ… ëª¨ë“  ì´ë¦„ ì…ë ¥ ì™„ë£Œ (${completedCount}/${members}ëª…)</span>`;
            } else {
                statusElement.innerHTML = `ì´ë¦„ ì…ë ¥ ì™„ë£Œ: ${completedCount}/${members}ëª… <span class="text-red-600 ml-2">(ëª¨ë“  ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”)</span>`;
            }
        }

        function updateDrawButton() {
            const button = document.getElementById('drawButton');
            const allNamesEntered = memberNames.every(name => name.trim() !== '');
            
            if (allNamesEntered && !isDrawing) {
                button.disabled = false;
                button.className = 'px-8 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200';
            } else {
                button.disabled = true;
                button.className = 'px-8 py-3 rounded-lg font-medium text-white bg-gray-400 cursor-not-allowed transition-all duration-200';
            }
        }

        function updateSidebar() {
            // ì£¼ì°¨ ì •ë³´
            const currentMonday = getMondayOfWeek();
            const currentSunday = new Date(currentMonday);
            currentSunday.setDate(currentSunday.getDate() + 6);
            
            document.getElementById('currentWeek').textContent = 
                `í˜„ì¬ ì£¼ì°¨: ${currentMonday.getMonth() + 1}/${currentMonday.getDate()} ~ ${currentSunday.getMonth() + 1}/${currentSunday.getDate()}`;
            
            const nextMonday = new Date(currentMonday);
            nextMonday.setDate(nextMonday.getDate() + 7);
            document.getElementById('nextReset').textContent = 
                `ë‹¤ìŒ ì´ˆê¸°í™”: ${nextMonday.getMonth() + 1}/${nextMonday.getDate()} (ì›”ìš”ì¼)`;
            
            // ì €ì¥ ìƒíƒœ
            const savedData = getSavedData();
            const saveStatusEl = document.getElementById('saveStatus');
            if (savedData && !isNewWeek()) {
                saveStatusEl.innerHTML = '<span class="text-green-600">ğŸ“ ê²°ê³¼ ì €ì¥ë¨</span>';
            } else {
                saveStatusEl.innerHTML = '<span class="text-gray-500">âŒ ì €ì¥ëœ ë°ì´í„° ì—†ìŒ</span>';
            }
            
            // ì‚¬ì´ë“œë°” ê²°ê³¼
            const sidebarResults = document.getElementById('sidebarResults');
            if (currentResults) {
                let html = '<div class="space-y-2">';
                currentResults.forEach(item => {
                    html += `<div><strong>ğŸ† ${item.label}</strong><br>`;
                    if (item.members.length > 0) {
                        item.members.forEach(member => {
                            const colorEmoji = colors[(member.index - 1) % colors.length];
                            html += `<span class="text-xs">${colorEmoji} ${member.name} (${member.index}ë²ˆ)</span><br>`;
                        });
                    } else {
                        html += '<span class="text-xs text-gray-500">ë°°ì •ëœ ì¸ì› ì—†ìŒ</span><br>';
                    }
                    html += '</div>';
                });
                html += '</div>';
                sidebarResults.innerHTML = html;
            } else {
                sidebarResults.innerHTML = '<p class="text-sm text-gray-500">â³ ì œë¹„ë½‘ê¸° ëŒ€ê¸° ì¤‘</p>';
            }
        }

        // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë“¤
        function changeMembers(delta) {
            const newCount = Math.max(2, Math.min(20, members + delta));
            if (newCount !== members) {
                members = newCount;
                if (memberNames.length < members) {
                    while (memberNames.length < members) {
                        memberNames.push('');
                    }
                } else {
                    memberNames = memberNames.slice(0, members);
                }
                updateUI();
            }
        }

        function changeItems(delta) {
            const newCount = Math.max(1, Math.min(10, items + delta));
            if (newCount !== items) {
                items = newCount;
                if (itemLabels.length < items) {
                    while (itemLabels.length < items) {
                        itemLabels.push(`í•­ëª©${itemLabels.length + 1}`);
                    }
                } else {
                    itemLabels = itemLabels.slice(0, items);
                }
                updateUI();
            }
        }

        function updateItemLabel(index, value) {
            itemLabels[index] = value || `í•­ëª©${index + 1}`;
        }

        function updateMemberName(index, value) {
            memberNames[index] = value;
            updateUI();
        }

        function startDraw() {
            if (!memberNames.every(name => name.trim() !== '')) {
                alert('ëª¨ë“  ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            isDrawing = true;
            document.getElementById('drawButton').textContent = 'ì œë¹„ë½‘ê¸° ì§„í–‰ ì¤‘...';
            updateDrawButton();
            
            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            const tickets = document.querySelectorAll('#ticketsDisplay > div');
            tickets.forEach(ticket => {
                ticket.classList.add('bounce');
            });
            
            setTimeout(() => {
                // ì œë¹„ë½‘ê¸° ë¡œì§
                const shuffledMembers = memberNames.map((name, index) => ({
                    index: index + 1,
                    name: name
                })).sort(() => Math.random() - 0.5);
                
                const membersPerItem = Math.floor(members / items);
                const remainder = members % items;
                
                const results = [];
                let currentIndex = 0;
                
                for (let i = 0; i < items; i++) {
                    const itemMemberCount = membersPerItem + (i < remainder ? 1 : 0);
                    const assignedMembers = [];
                    
                    for (let j = 0; j < itemMemberCount; j++) {
                        if (currentIndex < shuffledMembers.length) {
                            assignedMembers.push(shuffledMembers[currentIndex]);
                            currentIndex++;
                        }
                    }
                    
                    results.push({
                        label: itemLabels[i],
                        members: assignedMembers
                    });
                }
                
                currentResults = results;
                saveData(results);
                displayResults();
                
                isDrawing = false;
                document.getElementById('drawButton').textContent = 'ğŸ¯ ì œë¹„ë½‘ê¸° ì‹œì‘!';
                updateDrawButton();
                updateSidebar();
                
                tickets.forEach(ticket => {
                    ticket.classList.remove('bounce');
                });
            }, 2000);
        }

        function displayResults() {
            const resultArea = document.getElementById('savedResults');
            const resultContent = document.getElementById('resultsContent');
            const resultDate = document.getElementById('resultDate');
            
            let html = '';
            currentResults.forEach((result, index) => {
                const bgColor = index % 2 === 0 ? 'bg-blue-50 border-blue-200' : 'bg-green-50 border-green-200';
                const textColor = index % 2 === 0 ? 'text-blue-800' : 'text-green-800';
                
                html += `
                    <div class="rounded-lg p-4 border-2 ${bgColor}">
                        <h3 class="text-lg font-semibold mb-3 text-center ${textColor}">ğŸ† ${result.label}</h3>
                        <div class="space-y-2">
                `;
                
                if (result.members.length > 0) {
                    result.members.forEach(member => {
                        const colorEmoji = colors[(member.index - 1) % colors.length];
                        html += `
                            <div class="flex items-center gap-2 px-3 py-2 bg-white rounded-lg shadow-sm">
                                <span class="text-lg">${colorEmoji}</span>
                                <span class="font-medium">${member.name}</span>
                                <span class="text-sm text-gray-500">(${member.index}ë²ˆ)</span>
                            </div>
                        `;
                    });
                } else {
                    html += '<div class="text-center text-gray-500 py-4">ë°°ì •ëœ ì¸ì›ì´ ì—†ìŠµë‹ˆë‹¤</div>';
                }
                
                html += '</div></div>';
            });
            
            resultContent.innerHTML = html;
            resultDate.textContent = `ìƒì„±ì¼ì‹œ: ${new Date().toLocaleString('ko-KR')}`;
            
            resultArea.classList.remove('hidden');
            document.getElementById('lotterySetup').classList.add('hidden');
        }

        function newLottery() {
            currentResults = null;
            document.getElementById('savedResults').classList.add('hidden');
            document.getElementById('lotterySetup').classList.remove('hidden');
            updateSidebar();
        }

        function shareResults() {
            if (!currentResults) return;
            
            let shareText = 'ğŸ“‹ ì´ë²ˆ ì£¼ ì ì‹¬ì‹œê°„ ì œë¹„ë½‘ê¸° ê²°ê³¼\n';
            shareText += `ğŸ“… ${new Date().toLocaleString('ko-KR')}\n\n`;
            
            currentResults.forEach(item => {
                shareText += `ğŸ† ${item.label}\n`;
                if (item.members.length > 0) {
                    item.members.forEach(member => {
                        shareText += `  â€¢ ${member.name} (${member.index}ë²ˆ)\n`;
                    });
                } else {
                    shareText += '  â€¢ ë°°ì •ëœ ì¸ì› ì—†ìŒ\n';
                }
                shareText += '\n';
            });
            
            document.getElementById('shareText').value = shareText;
            document.getElementById('shareModal').classList.remove('hidden');
        }

        function closeShareModal() {
            document.getElementById('shareModal').classList.add('hidden');
        }

        function copyToClipboard() {
            const textArea = document.getElementById('shareText');
            textArea.select();
            document.execCommand('copy');
            alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ì´ˆê¸°í™”
        function init() {
            // ì£¼ì°¨ ì •ë³´ í‘œì‹œ
            const currentMonday = getMondayOfWeek();
            const currentSunday = new Date(currentMonday);
            currentSunday.setDate(currentSunday.getDate() + 6);
            
            document.getElementById('weekInfo').textContent = 
                `í˜„ì¬ ì£¼ì°¨: ${currentMonday.getFullYear()}-${String(currentMonday.getMonth() + 1).padStart(2, '0')}-${String(currentMonday.getDate()).padStart(2, '0')} ~ ${currentSunday.getFullYear()}-${String(currentSunday.getMonth() + 1).padStart(2, '0')}-${String(currentSunday.getDate()).padStart(2, '0')}`;
            
            // ì €ì¥ëœ ë°ì´í„° í™•ì¸
            const savedData = getSavedData();
            
            if (savedData && !isNewWeek()) {
                currentResults = savedData.results;
                displayResults();
            } else {
                if (savedData && isNewWeek()) {
                    clearData();
                }
                document.getElementById('savedResults').classList.add('hidden');
            }
            
            updateUI();
            updateSidebar();
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', init);
    </script>
</body>
</html>
